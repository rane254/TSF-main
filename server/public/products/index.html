const mongoose = require("mongoose");

const productSchema = new mongoose.Schema(
    {
        title: {
            type: String,
            required: [true, 'Please enter product name'],
            trim: true,
            maxlength: [100, 'Product name can not be more than 100']
        },

        description: {
            type: String,
            required: [true, 'Please enter product name'],
            trim: true,
            maxlength: [500, 'Product name can not be more than 500 characters']
        },

        price: {
            type: Number,
            required: [true, 'Please enter product price'],
            trim: true,
            maxlength: [5, 'Product price can not be more than 5 characters'],
            default: 0.0
        },

        ratings: {
            type: Number,
            default: 0
        },

        images: [
            {
                public_id: {
                    type: String,
                    required: [true, 'Please enter image id.']
                },

                url: {
                    type: String,
                    required: [true, 'Please enter image url.']
                },
            }
        ],

        category: {
            type: String,
            required: [true, 'Please select product category'],
            enum: {
                values: [
                    'Cake',
                    'Cupcake',
                    'Chocolate',
                    'Modak',
                    'Loaf'
                ],
                message: 'Please select correct category for this product.'
            }
        },

        stock: {
            type: Number,
            required: [true, 'Please enter product stock'],
            trim: true,
            maxlength: [5, 'Product stock can not be more than 5 characters'],
            default: 0
        },

        numOfReviews: {
            type: Number,
            default: 0
        },

        reviews: [
            {
                name: {
                    type: String,
                    required: true
                },

                rating: {
                    type: Number,
                    required: true
                },

                comment: {
                    type: String,
                    required: true
                }
            }
        ],

        createdAt: {
            type: Date,
            default: Date.now
        }
    }
);

const Product = mongoose.model('Product', productSchema);